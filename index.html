<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>בדיקת מודלים - כלי אבחון</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>body { background-color: #020617; color: white; font-family: sans-serif; }</style>
</head>
<body class="p-8 flex justify-center text-right">
    <div class="bg-slate-900 p-8 rounded-2xl border border-slate-700 w-full max-w-xl shadow-2xl">
        <h1 class="text-2xl font-bold mb-4 text-purple-400">כלי אבחון למפתח API</h1>
        <p class="text-slate-400 mb-6">הכלי הזה ישאל את גוגל אילו מודלים זמינים למפתח החדש שלך.</p>
        
        <button onclick="checkModels()" id="btn" class="w-full bg-purple-600 hover:bg-purple-500 py-4 rounded-xl font-bold transition-all mb-6">
            גלה מודלים זמינים
        </button>

        <div id="out" class="p-4 bg-black rounded-lg text-green-400 font-mono text-left text-sm whitespace-pre-wrap" dir="ltr"></div>
    </div>

    <script>
        async function checkModels() {
            const out = document.getElementById('out');
            const btn = document.getElementById('btn');
            const API_KEY = "AIzaSyCahUCjqsHk6EybVoWUb8Ujil6CH42wwGE"; 
            
            btn.disabled = true;
            out.innerText = "טוען נתונים משרתי גוגל...";

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${API_KEY}`);
                const data = await response.json();

                if (data.error) {
                    out.innerHTML = `<span class="text-red-500">שגיאה: ${data.error.message}</span>`;
                } else if (data.models) {
                    // מסנן רק את המודלים שתומכים ביצירת תוכן (טקסט)
                    const textModels = data.models
                        .filter(m => m.supportedGenerationMethods && m.supportedGenerationMethods.includes("generateContent"))
                        .map(m => m.name);
                    
                    out.innerText = "✅ מודלים זמינים למפתח שלך:\n\n" + textModels.join('\n');
                } else {
                    out.innerText = "לא נמצאו מודלים.";
                }
            } catch (err) {
                out.innerHTML = `<span class="text-red-500">שגיאת התחברות לגוגל.</span>`;
            } finally {
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
